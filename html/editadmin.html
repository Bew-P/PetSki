<!DOCTYPE html>
<html lang="en">

<head>
  <title>Edit account</title>
  <link rel="stylesheet" href="/css/addadmin.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>
  <nav>
    <img src="/images/LOGO.png" alt="Logo" name="logo" class="nav_left">
    <a href="/home" name="home" class="nav_left">HOME</a>
    <a href="/products" name="product" class="nav_left">PRODUCT</a>
    <a href="/team" name="about_as" class="nav_left">ABOUT US</a>
    <a href="/login" name="admin" class="nav_right"><i class="fa-regular fa-circle-user"></i></a>
    <a href="/adminmanage" name="edit" class="nav_right"><i class="fa-regular fa-pen-to-square"></i></a>
  </nav>
  <main>
    

    <div id="idform">
      <h2 id="h2"><b>Edit account</b></h2>
      <h5 id="h5">Only for admin and staff</h5>
      <form id="formC">
        <div class="rows">
          <div class="column">
            <label class="theLabels">First Name: </label>
            <input class="theInputs" type="text" name="first_name" id="fname" required><br>

          </div>
          <div class="column">
            <label class="theLabels">Last Name: </label>
            <input class="theInputs" type="text" name="last_name" id="lname" required><br>
          </div>
          <div class="column">
            <label class="theLabels">Email: </label>
            <input class="theInputs" type="email" name="email" id="Admin_email" required><br>
          </div>
          <div class="column">
            <label class="theLabels">Username: </label>
            <input class="theInputs" type="text" id="username" name="username" required><br>
          </div>
          <div class="column">
            <label class="theLabels">ID: </label>
            <input class="theInputs" type="text" id="id" name="id" required><br>
          </div>
          <div class="column">
            <label class="theLabels">Password: </label>
            <input class="theInputs" type="password" name="password" id="Admin_pw" required><br>
          </div>
        </div>

        
      </form>
      <button class="button" id="submit" type="submit">EDIT</button>
    </div>
    
  </main>
  <script>
    fetch('http://localhost:3000/api/admin')
    //       .then(res => JSON(res.json()))
    //       .then(data => {
    //           var trHTML = '';
    //           data.forEach(user => {
    //               trHTML += '<tr>';
    //               trHTML += `<td>${user.id}</td>`;
    //               trHTML += `<td>${user.fname} ${user.lname}</td>`;
    //               trHTML += `<td>${user.fname}</td>`;
    //               trHTML += `<td>${user.Admin_email}</td>`;
    //               trHTML += `<td><a href="/editadmin" class="btn_edit"><button>EDIT</button></a></td>`;
    //               trHTML += `<td><a href="/adminmanage" class="btn_del"><button>DELETE</button></a></td>`;
    //           });
    //           document.getElementById('admin').innerHTML = trHTML;
    //       })

    document.addEventListener("DOMContentLoaded", function() {
      document.getElementById('submit').addEventListener("click", function() {
        event.preventDefault();
        const fname = document.getElementById('fname').value;
        const lname = document.getElementById('lname').value;
        const email = document.getElementById('Admin_email').value;
        const username = document.getElementById('username').value;
        const id = document.getElementById('id').value;
        const password = document.getElementById('Admin_pw').value;

        const adminData = {
          'id': id,
          'username': username,
          'fname': fname,
          'lname': lname,
          'Admin_email': email,
          'Admin_pw': password	
        };

        fetch('/editadmin-submit', {
          method: 'PUT',
          headers: {
            "Content-type": "application/json"
          },
          body: JSON.stringify(adminData)
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Error')
          }
          return response.json();
        })
        .then(data => alert(data.message))
        .catch(error => {
          console.error('Error:', error);
          alert('Error updating admin');
        });
      });
    });

    
  </script>
</body>


<footer>
  <p><i>"WHO FEED A HUNGRY ANIMAL, FEED HIS OWN SOUL."<br>-CHARLIE CHAPLIN</i></p>
  <br>
  <h5>THANK YOU FOR YOUR MONEY</h5>
</footer>

</html>
